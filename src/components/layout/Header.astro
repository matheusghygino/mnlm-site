---
import logo from "../../assets/logo-mnlm.png";
---

<header class="w-full bg-bg border-b border-border mb-2">
  <!-- TOPBAR -->
  <div class="bg-primary text-white text-sm text-center py-2">
    Sem anúncios. Sem conteúdo pago. Financiado 100% pelos leitores.
    <button
      data-open-support
      class="ml-1 font-semibold underline underline-offset-2 hover:opacity-80 transition"
    >
      Doe hoje mesmo
    </button>
  </div>

  <!-- LOGO -->
  <div>
    <div class="mx-auto max-w-6xl px-4 py-6 flex justify-center">
      <a href="/" class="flex items-center gap-4">
        <img src={logo.src} alt="MNLM" class="h-16 w-auto" />
        <div class="leading-tight">
          <div class="text-3xl font-extrabold font-display">MNLM</div>
          <div class="text-sm tracking-wide text-muted">
            MOVIMENTO NACIONAL<br />DE LUTA PELA MORADIA
          </div>
        </div>
      </a>
    </div>
  </div>

  <!-- MENU DESKTOP -->
  <nav class="hidden md:flex justify-center gap-12 py-3 text-sm font-bold">
    <div class="relative group">
      <span class="cursor-pointer hover:text-primary transition text-lg">
        MNLM
      </span>

      <div
        class="absolute left-1/2 top-full -translate-x-1/2
               w-56 bg-bg shadow-lg
               border border-border border-t-4 border-t-primary
               opacity-0 pointer-events-none
               group-hover:opacity-100 group-hover:pointer-events-auto
               transition-opacity z-50"
      >
        <a
          href="/sobre"
          class="block px-5 py-3 hover:bg-bg-muted hover:bg-primary-dark hover:text-white"
          >Sobre nós</a
        >
        <a
          href="/atuacao"
          class="block px-5 py-3 hover:bg-bg-muted hover:bg-primary-dark hover:text-white"
          >Atuação</a
        >
        <a
          href="/manifesto"
          class="block px-5 py-3 hover:bg-bg-muted hover:bg-primary-dark hover:text-white"
          >Manifesto</a
        >
      </div>
    </div>

    <a href="/midias" class="hover:text-primary transition text-lg">MÍDIAS</a>
    <a href="/jornal" class="hover:text-primary transition text-lg">JORNAL</a>
    <a href="/contato" class="hover:text-primary transition text-lg">CONTATO</a>
  </nav>

  <!-- BOTÃO MOBILE -->
  <button
    id="menuBtn"
    class="md:hidden absolute right-4 top-[92px] text-2xl"
    aria-label="Abrir menu"
  >
    ☰
  </button>

  <!-- MENU MOBILE -->
  <nav
    id="mobileMenu"
    class="fixed inset-0 z-40 bg-bg pt-32 px-6
           -translate-x-full opacity-0
           transition-all duration-300 ease-in-out md:hidden"
  >
    <button
      id="closeMenu"
      class="absolute top-6 right-6 text-2xl"
      aria-label="Fechar menu"
    >
      ✕
    </button>

    <!-- MNLM ACCORDION -->
    <div class="border-b border-border py-4">
      <button
        id="accBtn"
        class="w-full flex justify-between items-center font-bold text-lg"
      >
        MNLM <span id="accIcon">+</span>
      </button>

      <div
        id="accContent"
        class="hidden mt-4 pl-4 flex flex-col gap-3 text-muted"
      >
        <a href="/sobre">Sobre nós</a>
        <a href="/atuacao">Atuação</a>
        <a href="/manifesto">Manifesto</a>
      </div>
    </div>

    <a
      href="/midias"
      class="block border-b border-border py-4 text-lg font-bold">MÍDIAS</a
    >
    <a
      href="/jornal"
      class="block border-b border-border py-4 text-lg font-bold">JORNAL</a
    >
    <a
      href="/contato"
      class="block border-b border-border py-4 text-lg font-bold">CONTATO</a
    >
  </nav>
</header>

<script>
  const menuBtn = document.getElementById("menuBtn");
  const closeBtn = document.getElementById("closeMenu");
  const menu = document.getElementById("mobileMenu");

  menuBtn.onclick = () => {
    menu.classList.remove("-translate-x-full", "opacity-0");
    document.body.style.overflow = "hidden";
  };

  closeBtn.onclick = () => {
    menu.classList.add("-translate-x-full", "opacity-0");
    document.body.style.overflow = "";
  };

  const accBtn = document.getElementById("accBtn");
  const accContent = document.getElementById("accContent");
  const accIcon = document.getElementById("accIcon");

  accBtn.onclick = () => {
    const open = !accContent.classList.contains("hidden");
    accContent.classList.toggle("hidden", open);
    accIcon.textContent = open ? "+" : "−";
  };
</script>
